{
  "$schema": "https://playground.wordpress.net/blueprint-schema.json",
  "preferredVersions": {
    "php": "8.3",
    "wp": "latest"
  },
  "features": {
    "networking": true
  },
  "steps": [
    {
      "step": "login",
      "username": "admin",
      "password": "password"
    },
    {
      "step": "installPlugin",
      "pluginZipFile": {
        "resource": "wordpress.org/plugins",
        "slug": "super-progressive-web-apps"
      },
      "options": {
        "activate": true
      }
    },
    {
      "step": "installPlugin",
      "pluginZipFile": {
        "resource": "url",
        "url": "https://github.com/WordPress/playground-tools/releases/latest/download/collab.zip"
      },
      "options": {
        "activate": true
      }
    },
    {
      "step": "installTheme",
      "themeZipFile": {
        "resource": "wordpress.org/themes",
        "slug": "astra"
      },
      "options": {
        "activate": true
      }
    },
    {
      "step": "writeFile",
      "path": "/wordpress/wp-content/mu-plugins/ai-cowriter.php",
      "data": "<?php\n// AI Co-Writer: Llama 3.2 via WASM + Voice + Collab\nadd_action('wp_footer', function() {?>\n<script type=\"module\">\n// Load Llama 3.2 3B WASM model (quantized)\nawait import('https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.0.0-alpha.6');\nconst { pipeline } = window.transformers;\nconst generator = await pipeline('text-generation', 'onnx-community/Llama-3.2-3B-Instruct-q4', { quantized: true, dtype: 'q4' });\n\n// Voice to AI\nnavigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {\n  const recorder = new MediaRecorder(stream);\n  document.getElementById('speak-btn')?.addEventListener('click', () => recorder.start());\n});\n\n// Generate AI text\nconst generate = async (prompt) => {\n  const output = await generator(prompt, { max_new_tokens: 100 });\n  return output[0].generated_text;\n};\n\n// WebRTC Collab (via Simple Peer)\nawait import('https://cdn.jsdelivr.net/npm/simple-peer@9.11.1');\n</script>\n<style>#ai-panel{position:fixed;bottom:20px;right:20px;background:#000;color:#0f0;padding:15px;border-radius:12px;font-family:monospace;box-shadow:0 0 20px #0f0;z-index:99999;}#speak-btn{background:#0f0;color:#000;border:none;padding:10px;border-radius:50%;}</style>\n<div id=\"ai-panel\">âœ¨ AI Co-Writer Ready | <button id=\"speak-btn\">ðŸŽ¤</button></div>\n<?php });"
    },
    {
      "step": "writeFile",
      "path": "/wordpress/index.php",
      "data": "<?php\nheader('Service-Worker-Allowed: /');\n?><!DOCTYPE html><html><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"><title>AI Co-Writer</title><link rel=\"manifest\" href=\"/wp-content/plugins/super-progressive-web-apps/sw-manifest.json\"><meta name=\"theme-color\" content=\"#000000\"></head><body><?php wp_footer(); ?></body></html>"
    },
    {
      "step": "runPHP",
      "code": "<?php\nupdate_option('blogname', 'AI Co-Writer Playground');\nupdate_option('blogdescription', 'Collaborative AI Writing â€” Offline & Installable');\n?>"
    },
    {
      "step": "setSiteOptions",
      "options": {
        "permalink_structure": "/%postname%/"
      }
    },
    {
      "step": "enablePostRevisions"
    }
  ],
  "landingPage": "/",
  "options": {
    "runInIFrame": false,
    "pwa": {
      "enabled": true,
      "startUrl": "/",
      "name": "AI Co-Writer",
      "shortName": "AICo",
      "display": "standalone",
      "backgroundColor": "#000000",
      "themeColor": "#00ff00",
      "icons": [
        {
          "src": "https://wordpress.org/latest.png",
          "sizes": "192x192",
          "type": "image/png"
        }
      ]
    }
  }
}

